<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portfolio upload</title>
  <style>
    :root {
      --main-color: #000;
      --hover-color: #444;
      --bg-color: #f8f8f8;
      --border-style: 2px dashed #000;
    }

    * {
      box-sizing: border-box;
      transition: all 0.2s ease;
    }

    body {
      background: var(--bg-color);
      font-family: "Inter", Arial, sans-serif;
      color: #111;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      min-height: 100vh;
      padding: 40px 20px;
    }

    h1 {
      font-weight: 700;
      letter-spacing: 0.5px;
      margin-bottom: 20px;
    }

    #canvas {
      width: 90%;
      max-width: 1000px;
      aspect-ratio: 1.414; /* Tỉ lệ A4 */
      border: var(--border-style);
      background: #fff;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      border-radius: 10px;
      overflow-y: auto;
      max-height: 80vh;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 60px;
    }

    #placeholder {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.6rem;
      color: #bbb;
      text-align: center;
      font-weight: 500;
      pointer-events: none;
      z-index: 0;
    }

    #canvas > *:not(#placeholder) {
      z-index: 1;
    }

    #canvas p {
      line-height: 1.6;
      font-size: 1rem;
      margin: 10px 0;
      width: 100%;
    }

    .toolbar {
      margin-top: 25px;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      background: #fff;
      padding: 12px 20px;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
      position: sticky;
      bottom: 20px;
      z-index: 10;
    }

    button {
      background: var(--main-color);
      color: #fff;
      border: none;
      padding: 10px 16px;
      border-radius: 6px;
      font-weight: 500;
      cursor: pointer;
    }

    button:hover {
      background: var(--hover-color);
      transform: translateY(-1px);
    }

    .photo-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      margin-top: 12px;
      width: 100%;
    }

    img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      display: block;
    }

    iframe, audio, model-viewer {
      width: 100%;
      margin-top: 16px;
      border-radius: 8px;
      border: none;
    }

    audio {
      outline: none;
    }

    textarea {
      width: 100%;
      height: 100px;
      margin-top: 10px;
      font-family: inherit;
    }

    #canvas::-webkit-scrollbar {
      width: 8px;
    }

    #canvas::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }
	  
  </style>
</head>
<body>
  <div id="canvas" contenteditable="false">
    <div id="placeholder">Portfolio Upload</div>
  </div>

  <div class="toolbar">
    <button onclick="addText()">Text</button>
    <button onclick="addImage()">Image</button>
    <button onclick="addPhotoGrid()">PhotoGrid</button>
    <button onclick="addVideo()">Video</button>
    <button onclick="addAudio()">Audio</button>
    <button onclick="addEmbed()">Embed</button>
    <button onclick="addLightroom()">Lightroom</button>
    <button onclick="add3D()">3D</button>
    <button onclick="copyHTML()">Copy HTML</button>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const placeholder = document.getElementById('placeholder');

    function togglePlaceholder() {
      const hasContent = [...canvas.children].some(el => el.id !== 'placeholder');
      placeholder.style.display = hasContent ? 'none' : 'block';
    }

    function addText() {
      const text = prompt("Nhập nội dung text (dùng \\n để xuống dòng):");
      if (text) {
        const p = document.createElement('p');
        p.textContent = text.replace(/\\n/g, "\n");
        canvas.appendChild(p);
        togglePlaceholder();
      }
    }

    function addImage() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'image/*';
      input.onchange = e => {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = event => {
          const img = document.createElement('img');
          img.src = event.target.result;
          img.style.width = '100%';
          canvas.appendChild(img);
          togglePlaceholder();
        };
        reader.readAsDataURL(file);
      };
      input.click();
    }

    function addPhotoGrid() {
      const input = document.createElement('input');
      input.type = 'file';
      input.multiple = true;
      input.accept = 'image/*';
      input.onchange = e => {
        const grid = document.createElement('div');
        grid.className = 'photo-grid';
        [...e.target.files].forEach(file => {
          const reader = new FileReader();
          reader.onload = ev => {
            const img = document.createElement('img');
            img.src = ev.target.result;
            grid.appendChild(img);
          };
          reader.readAsDataURL(file);
        });
        canvas.appendChild(grid);
        togglePlaceholder();
      };
      input.click();
    }

    function addVideo() {
      const url = prompt("Dán link YouTube:");
      if (url) {
        const iframe = document.createElement('iframe');
        iframe.src = url.replace("watch?v=", "embed/");
        iframe.height = "400";
        iframe.allowFullscreen = true;
        canvas.appendChild(iframe);
        togglePlaceholder();
      }
    }

    function addAudio() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'audio/*';
      input.onchange = e => {
        const file = e.target.files[0];
        const audio = document.createElement('audio');
        audio.controls = true;
        audio.src = URL.createObjectURL(file);
        canvas.appendChild(audio);
        togglePlaceholder();
      };
      input.click();
    }

    function addEmbed() {
      const code = prompt("Nhập iframe hoặc URL embed:");
      if (code) {
        if (code.startsWith("<iframe")) {
          canvas.insertAdjacentHTML("beforeend", code);
        } else {
          const iframe = document.createElement('iframe');
          iframe.src = code;
          iframe.height = "400";
          canvas.appendChild(iframe);
        }
        togglePlaceholder();
      }
    }

    function addLightroom() {
      const link = prompt("Dán link bộ sưu tập Lightroom:");
      if (link) {
        const iframe = document.createElement('iframe');
        iframe.src = link;
        iframe.height = "500";
        canvas.appendChild(iframe);
        togglePlaceholder();
      }
    }

    function add3D() {
      const link = prompt("Dán link Sketchfab hoặc file .glb:");
      if (link) {
        if (link.includes("sketchfab")) {
          const iframe = document.createElement('iframe');
          iframe.src = link + "/embed";
          iframe.height = "500";
          iframe.allow = "autoplay; fullscreen; vr";
          iframe.allowFullscreen = true;
          canvas.appendChild(iframe);
        } else if (link.endsWith(".glb")) {
          const mv = document.createElement('model-viewer');
          mv.src = link;
          mv.alt = "3D Model";
          mv.cameraControls = true;
          mv.autoRotate = true;
          mv.style.height = "500px";
          canvas.appendChild(mv);
        } else {
          alert("Link không hợp lệ.");
        }
        togglePlaceholder();
      }
    }

    function copyHTML() {
      const html = canvas.innerHTML;
      navigator.clipboard.writeText(html)
        .then(() => alert("✅ Đã copy nội dung HTML!"))
        .catch(() => alert("❌ Lỗi khi copy."));
    }
  </script>

  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</body>
</html>
